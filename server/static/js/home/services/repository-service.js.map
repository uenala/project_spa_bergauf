{"version":3,"sources":["home/services/repository-service.ts"],"names":["Home","Home.Services","Home.Services.Repository","Home.Services.Repository.constructor","Home.Services.Repository.loadGalleryData","Home.Services.Repository.getGalleries","Home.Services.Repository.getGallery","Home.Services.Repository.getGalleryImages"],"mappings":"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","file":"home/services/repository-service.js","sourceRoot":"/Users/erol/CAS_FEE/git/casfee/project_spa_bergauf/SpaBergaufDotCh/","sourcesContent":["///<reference path='../../../typings/tsd.d.ts' />\nmodule Home.Services {\n  'use strict';\n\n  export interface IRepository {\n    loadGalleryData() : ng.IPromise<Home.Data.IGallery>;\n    getGalleries() : Array<Home.Data.IGallery>;\n    getGallery() : Home.Data.IGallery;\n    getGalleryImages() : Array<Home.Data.IImage>;\n  }\n\n  class Repository {\n    galleryData : Array<Home.Data.IGallery>;\n    imagesData : Array<Home.Data.IImage>;\n\n    public static $inject = ['$log','$http', '$q','$location'];\n\n    constructor(private $log : ng.ILogService, private $http:ng.IHttpService, private $q : ng.IQService,\n                private $location : ng.ILocationService) {\n    }\n\n    //ToDo: either one master json or for each type a data set, e.g. loadSkitourenGalleryData\n    loadGalleryData() : ng.IPromise<Home.Data.IGallery> {\n      var deferred = this.$q.defer();\n      var jsonfile = '/data/master.json';\n\n      if (!this.galleryData) {\n        this.$http.get(jsonfile).then((data) => {\n\n          var gdata = [];\n          // loop through root (bergtouren, skitouren, etc.\n          angular.forEach(data.data, function(data) {\n            //console.log(data.title);\n\n            // loop through galleries\n            angular.forEach(data.galleries, function(galleries) {\n              //console.log(galleries);\n              if (galleries.images) {\n                gdata.push(galleries);\n              }\n\n              // loop through additional travel galleries\n              angular.forEach(galleries.galleries, function(galleries) {\n                //console.log(galleries);\n                if (galleries.images) {\n                  gdata.push(galleries);\n                }\n              });\n\n            });\n          });\n          this.galleryData = <Array<Home.Data.IGallery>> gdata;\n          deferred.resolve(this.galleryData);\n        });\n      } else {\n        deferred.resolve(this.galleryData);\n      }\n      return deferred.promise;\n    }\n\n\n    getGalleries():Array<Home.Data.IGallery> {\n\n      return this.galleryData;\n    }\n\n\n    getGallery():Home.Data.IGallery {\n      var i=0;\n      for (i; i<this.galleryData.length; i++) {\n        if (this.galleryData[i].path === this.$location.path()) {\n          break;\n        }\n      }\n\n      return this.galleryData[i];\n    }\n\n\n    getGalleryImages():Array<Home.Data.IImage> {\n\n      var i=0;\n      for (i; i<this.galleryData.length; i++) {\n        if (this.galleryData[i].path === this.$location.path()) {\n          this.imagesData = this.galleryData[i].images;\n          break;\n        }\n      }\n\n      return this.imagesData;\n    }\n\n  }\n\n  angular\n    .module('home')\n    .service('Repository', Repository);\n}\n"]}